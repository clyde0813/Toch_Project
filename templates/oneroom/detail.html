{% extends 'base.html' %}
{% load static %}
{% block content %}
    <link rel="stylesheet" href="{% static 'oneroom/oneroom_detail.css' %}">
    <style>

    </style>
    <!-- 모달창 전체 컨테이너 -->
    <div class="modal_container hidden">
        <!-- 배경 블러처리 -->
        <div class="modal_window"></div>

        <!-- 연락처 창 -->
        <div class="contact_window hidden">
          <div class="contact_header">
            <button class="x_btn btn">x</button>
          </div>
          <div class="contact_body"></div>
          <div class="contact_footer">
            <button class="message_btn btn">메세지</button>
            <button class="call_btn btn">전화</button>
          </div>
        </div>

        <!-- 리뷰 쓰기 창 -->
        <form id="review_form" action="">
            <div class="review_write_window hidden">
                <div class="review_write_header">
                    <div class="x_btn btn " style="background-color: whitesmoke">x</div>
                    <div class="header">
                        <div class="review_write_title">Title</div>
                        <div class="review_write_star_rating">* * * * *</div>
                    </div>
                </div>
                <div class="review_write_body">
                    <textarea placeholder="리뷰를 작성해 주세요."></textarea>
                    <input type="file" value="+">
                </div>
                <div class="review_write_footer">
                    <button class="review_write_btn">리뷰 등록</button>
                </div>
            </div>
        </form>
    </div>

    <!-- 집 정보 테이블 시작 -->
    <table class="table table-bordered">
        <tbody>
        <tr>
            <td colspan="2">월세 200 / {{ data.firt.rent_amount }}원</td>
            <td colspan="2">면적 10평</td>
            <td colspan="6">40만원
                <button type="button" class="btn btn-outline-secondary contact_btn"  style="float:right">연락처보기</button>
            </td>
        </tr>
        <tr>
            <td>해당층/건물층</td>
            <td>{{ data.first.floor_num }}층/ {{ data.first.floor_total }}층</td>
            <td>전용/공급면적</td>
            <td>???/???</td>
            <td>방/욕실수</td>
            <td>{{ data.first.room_num }}개/{{ data.first.toilet_num }}개</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>난방종류</td>
            <td>{{ data.first.gas_type }}</td>
            <td>옵션수</td>
            <td>5개</td>
            <td>건물 주차수</td>
            <td>총 4대</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>난방종류</td>
            <td>LPG</td>
            <td>옵션수</td>
            <td>5개</td>
            <td>건물 주차수</td>
            <td>총 4대</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>난방종류</td>
            <td>LPG</td>
            <td>옵션수</td>
            <td>5개</td>
            <td>건물 주차수</td>
            <td>총 4대</td>
            <td></td>
            <td></td>
        </tr>
        </tbody>
    </table>

    <!-- 방 사진 -->
    <div class="roomImageContainer">
        <div class="roomImage">사진</div>
        <div class="roomImage">사진</div>
        <div class="roomImage">사진</div>
        <div class="roomImage">더보기</div>
    </div>

    <!-- 옵션 -->
    <div class="option">
        <div class="option_title">옵션</div>
        <div class="option_list"></div>
    </div>

    <!-- 시설 -->
    <div class="facility">
        <div class="facility_title">시설</div>
        <div class="facility_list"></div>
    </div>

    <!-- 리뷰창 -->
    <div class="review">
        <div class="review_header">
            <div class="review_title">실거주자 리뷰</div>
            <div class="review_write">리뷰작성</div>
        </div>
        <ul class="review_ul">
            <li class="review_li">
                <!-- 리뷰 작성자 정보띄우는 창 -->
                <div class="review_info">

                    <img src="" alt="Profile" class="review_profile_img" style="width: 50px; height: 50px; border-radius: 50%">
                    <div class="info_container">
                        <div class="review_writer">
                            <span class="writer_name">홍길동</span>
                            <span class="write_date">1월 1일</span>
                        </div>
                        <div class="star_rating">*****</div>
                    </div>
                </div>
                <!-- 리뷰 사진 -->
                <div class="review_img_container">
                    <img src="" alt="리뷰 사진." class="review_img">
                </div>

                <!-- 리뷰 내용 -->
                <div class="review_text_container">
                    리뷰입니다.
                </div>
            </li>
        </ul>
    </div>

    <!-- 페이지 네비게이션 -->
    <div class="pagination">
        <ul class="page_ul">
            <li class="page_li"><</li>
            <li class="page_li">1</li>
            <li class="page_li">2</li>
            <li class="page_li">3</li>
            <li class="page_li">4</li>
            <li class="page_li">5</li>
            <li class="page_li">></li>
        </ul>
    </div>

    <!-- 다른방 둘러보기 -->
    <div class="another_rooms">
        <div class="title">다른 방 둘러보기</div>
        <ul class="another_rooms_ul">
            <!-- 방 이미지 + 정보 -->
            <li class="another_rooms_li">
                <img src="" alt="다른방" class="another_rooms_img">
                <div class="another_rooms_content">월세 30</div>
            </li>

        </ul>
    </div>

    <script>
        // 모달창 전체를 감싸는 컨테이너
        const modal_container = document.querySelector('.modal_container');
        // 연락처보기 버튼
        const contact_btn = document.querySelector('.contact_btn');
        // 연락처를 띄우는 창
        const contact_window = document.querySelector('.contact_window');
        // 연락처 창 중간부분
        const contact_body = document.querySelector('.contact_body');
        // 닫기 버튼
        const x_btn = document.querySelector('.x_btn');
        // 리뷰 띄우는 창
        const review_write_window = document.querySelector('.review_write_window');

        // 연락처 Text
        let contact = '010 - 1111- 2222';
        contact_body.textContent = contact;

        // Modal 배경 보이기/가리기
        function toggleModal() {
          modal_container.classList.toggle('hidden');
        }

        // 연락처 창 보이기/가리기
        function toggleContact() {
            contact_window.classList.toggle('hidden');
        }

        // 연락처버튼 Event 등록
        contact_btn.addEventListener('click', () => {
          toggleModal();
          toggleContact();
        })

        // 리뷰 작성
        // 리뷰작성 버튼
        const review_write = document.querySelector('.review_write');

        function toggleReview() {
            review_write_window.classList.toggle('hidden');
        }

        review_write.addEventListener('click', () => {
            toggleModal();
            toggleReview();
        })

        // x 버튼 Event 등록
        modal_container.addEventListener('click', (e) => {
            if(e.target.className.includes('x_btn')) {
                e.target.parentNode.parentNode.classList.toggle('hidden');
                toggleModal();
            }
        })
    </script>
{% endblock %}